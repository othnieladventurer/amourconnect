{% extends 'nmdashboard/base.html' %}

{% block content %}

<main class="flex-1 pt-28 px-4 mb-7">
  <div class="max-w-5xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col lg:flex-row">

    <!-- PROFILE PHOTO -->
    <div class="lg:w-1/2 relative flex-shrink-0 h-[70vh] sm:h-[75vh] lg:h-auto">

      {% if profile_suser.profile_photo %}
        <img src="{{ profile_suser.profile_photo.url }}" 
            class="w-full h-full object-cover">
      {% else %}
        <img src="/static/images/default-profile.png" 
            class="w-full h-full object-cover">
      {% endif %}

      <div class="absolute bottom-0 left-0 w-full 
                  bg-gradient-to-t from-black/70 via-black/30 to-transparent p-6">
        <h1 class="text-3xl font-bold text-white">
          {{ profile_suser.username }}
        </h1>

        {% if profile_suser.bio %}
          <p class="text-white mt-1 text-sm">
            {{ profile_suser.bio }}
          </p>
        {% endif %}
      </div>

    </div>



    <!-- INFO CARDS -->
    <div class="lg:w-1/2 p-6 space-y-4">
      <div class="grid grid-cols-2 gap-4 text-gray-700">
        <div class="bg-pink-50 rounded-xl p-4 shadow-sm">
            <p class="text-sm text-gray-500">√Çge</p>
            <p class="font-semibold">
                {% if age %}
                {{ age }} ans
                {% else %}
                -
                {% endif %}
            </p>
        </div>

        <div class="bg-blue-50 rounded-xl p-4 shadow-sm">
          <p class="text-sm text-gray-500">Genre</p>
          <p class="font-semibold">{{ profile_suser.get_gender_display }}</p>
        </div>

        <div class="bg-yellow-50 rounded-xl p-4 shadow-sm">
          <p class="text-sm text-gray-500">Localisation</p>
          <p class="font-semibold">{{ profile_suser.location|default:"-" }}</p>
        </div>

        <div class="bg-green-50 rounded-xl p-4 shadow-sm">
          <p class="text-sm text-gray-500">Carri√®re</p>
          <p class="font-semibold">{{ profile_suser.career|default:"-" }}</p>
        </div>

        <div class="bg-purple-50 rounded-xl p-4 shadow-sm">
          <p class="text-sm text-gray-500">Passions</p>
          <p class="font-semibold">{{ profile_suser.passions|default:"-" }}</p>
        </div>

        <div class="bg-pink-100 rounded-xl p-4 shadow-sm">
          <p class="text-sm text-gray-500">Hobbies</p>
          <p class="font-semibold">{{ profile_suser.hobbies|default:"-" }}</p>
        </div>

        <div class="bg-blue-100 rounded-xl p-4 shadow-sm">
          <p class="text-sm text-gray-500">Musique pr√©f√©r√©e</p>
          <p class="font-semibold">{{ profile_suser.favorite_music|default:"-" }}</p>
        </div>

        <div class="bg-yellow-100 rounded-xl p-4 shadow-sm">
          <p class="text-sm text-gray-500">Int√©ress√©(e) par</p>
          <p class="font-semibold">{{ profile_suser.get_interested_in_display }}</p>
        </div>
      </div>

    <!-- ACTION BUTTONS -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-5 mt-8">

        <!-- SEND MESSAGE -->
        <a href="{% url 'nmdashboard:chat' profile_suser.id %}"
          class="flex items-center justify-center gap-2 h-14 
                bg-pink-600 text-white rounded-2xl font-semibold 
                hover:bg-pink-700 hover:shadow-lg 
                transition-all duration-200 shadow-md w-full">
            üí¨ <span>Envoyer un message</span>
        </a>

        <!-- UNMATCH -->
        <form method="POST" 
              action="{% url 'nmdashboard:unmatch_user' %}">
            {% csrf_token %}
            <input type="hidden" name="user_id" value="{{ profile_suser.id }}">
            <button type="submit"
                class="flex items-center justify-center gap-2 h-14 
                      bg-gray-200 text-gray-800 rounded-2xl font-semibold 
                      hover:bg-gray-300 hover:shadow-lg 
                      transition-all duration-200 shadow-md w-full">
                ‚ùå <span>Unmatch</span>
            </button>
        </form>

        <!-- BLOCK (Full width on desktop) -->
        <form method="POST" 
              action="{% url 'nmdashboard:block_user' %}" 
              class="lg:col-span-2">
            {% csrf_token %}
            <input type="hidden" name="user_id" value="{{ profile_suser.id }}">
            <button type="submit"
                class="flex items-center justify-center gap-2 h-14 
                      bg-black text-white rounded-2xl font-semibold 
                      hover:bg-gray-900 hover:shadow-lg 
                      transition-all duration-200 shadow-md w-full">
                üö´ <span>Bloquer</span>
            </button>
        </form>

    </div>




      <!-- OPTIONAL: FUN TAGS -->
      <div class="p-6 flex flex-wrap gap-2">
        {% for hobby in hobbies_list %}
            <span class="bg-pink-200 text-pink-800 text-sm px-3 py-1 rounded-full">{{ hobby }}</span>
        {% endfor %}

        {% for passion in passions_list %}
            <span class="bg-blue-200 text-blue-800 text-sm px-3 py-1 rounded-full">{{ passion }}</span>
        {% endfor %}
      </div>

    </div>
  </div>
</main>

{% endblock content %}
