<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>NouMatch Dashboard</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: "#8e24aa",
        secondary: "#e91e63",
      }
    }
  }
}
</script>

<style>
* { scroll-behavior: smooth; }

.slide-out-left { animation: slideOutLeft 0.5s forwards; }
.slide-out-right { animation: slideOutRight 0.5s forwards; }
.slide-in { animation: slideIn 0.5s forwards; }

@keyframes slideOutLeft { to { transform: translateX(-100%) rotate(-10deg); opacity: 0; } }
@keyframes slideOutRight { to { transform: translateX(100%) rotate(10deg); opacity: 0; } }
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes matchPop {
  0% { transform: scale(0.5); opacity: 0; }
  70% { transform: scale(1.3); }
  100% { transform: scale(1); opacity: 1; }
}
.match-pop { animation: matchPop 0.6s ease-out; }
</style>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">

<!-- NAVBAR -->
<header class="fixed w-full bg-white/90 backdrop-blur shadow z-50">
  <div class="max-w-7xl mx-auto flex justify-between items-center px-6 py-4">
    <a href="{% url 'nmdashboard:dashboard' %}" class="flex items-center gap-2">
      <i class="fa-solid fa-heart text-secondary text-2xl"></i>
      <span class="text-2xl font-bold text-primary">NouMatch</span>
    </a>

    <nav class="hidden md:flex gap-6 items-center relative" id="nav-links">
      <a href="{% url 'nmdashboard:dashboard' %}"><i class="fa-solid fa-house text-xl cursor-pointer"></i></a>
      <div class="relative">
        <button type="button"><i class="fa-solid fa-envelope text-xl cursor-pointer" id="messagesBtn"></i></button>
        <div id="messagesDropdown" class="hidden absolute right-0 mt-2 w-64 bg-white shadow-lg rounded-lg overflow-hidden z-50">
          <div class="p-4 border-b font-bold">Messages</div>
          <ul class="divide-y">
            <li class="p-3 cursor-pointer bg-gray-100 font-semibold">Nouvel utilisateur veut matcher âœ…</li>
            <li class="p-3 cursor-pointer">Salut, comment Ã§a va ?</li>
            <li class="p-3 cursor-pointer bg-gray-100 font-semibold">Invitation Ã  discuter ðŸ’¬</li>
          </ul>
        </div>
      </div>
        <a href="{% url 'nmdashboard:my_profile' %}">
            {% if request.user.profile_photo %}
                <img 
                    src="{{ request.user.profile_photo.url }}" 
                    alt="My profile"
                    class="w-8 h-8 rounded-full object-cover cursor-pointer"
                >
            {% else %}
                <i class="fa-solid fa-user text-xl cursor-pointer"></i>
            {% endif %}
        </a>
      <form method="post" action="{% url 'users:logout' %}" class="inline">
        {% csrf_token %}
        <button type="submit">
          <i class="fa-solid fa-right-from-bracket text-xl bg-secondary text-white p-2 rounded-full cursor-pointer"></i>
        </button>
      </form>
    </nav>

    <div class="md:hidden flex items-center">
      <button id="hamburger" class="text-2xl text-gray-700"><i class="fa-solid fa-bars"></i></button>
    </div>
  </div>
</header>

<script>
// Messages dropdown
const messagesBtn = document.getElementById('messagesBtn');
const messagesDropdown = document.getElementById('messagesDropdown');
messagesBtn.addEventListener('click', () => messagesDropdown.classList.toggle('hidden'));
document.addEventListener('click', (e) => {
  if (!messagesBtn.contains(e.target) && !messagesDropdown.contains(e.target)) messagesDropdown.classList.add('hidden');
});

// Hamburger toggle
const hamburger = document.getElementById("hamburger");
const navLinks = document.getElementById("nav-links");
hamburger.addEventListener("click", () => navLinks.classList.toggle("hidden"));
</script>

{% block content %}{% endblock content %}

<footer class="bg-black text-gray-400 py-8 text-center text-sm">
  <div class="mb-3">Â© 2026 NouMatch â€” Des connexions sincÃ¨res et respectueuses</div>
  <div class="flex justify-center gap-6 text-gray-500">
    <a href="{% url 'noumatch:term_of_use' %}" class="hover:text-white transition">Conditions dâ€™utilisation</a>
    <span class="opacity-50">â€¢</span>
    <a href="{% url 'noumatch:privacy_policy' %}" class="hover:text-white transition">Politique de confidentialitÃ©</a>
  </div>
</footer>
</body>
</html>
